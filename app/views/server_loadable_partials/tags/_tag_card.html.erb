<div class='col-xs-12 col-sm-4 col-md-3 p-2'>
  <%= link_to tag_path(tag), class: 'no-decoration' do %>
    <div class='tag-card'>
      <div class='chart-container'>
        <!-- <#%= turbo_frame_tag "#{tag.uid}_tag_chart", src: charts_tag_path(tag, hide_time_range_selector: true, hide_chart_titles: true) do %> !-->
        <%= turbo_frame_tag "#{tag.uid}_tag_chart", src: charts_tag_path(tag, hide_time_range_selector: true, hide_chart_titles: true) do %>
          <div class='text-center p-3'>
            <%= display_loading_spinner size: :small %>
          </div>
        <% end %>
      </div>
      <div class='tag-card-body'>
        <div class='tag-card-header'>
          <div class='col-12'>
            <div class='row'>
              <div class='col-8 d-flex align-items-center overflow-ellipsis'>
                <% if tag.has_image? %>
                  <%= image_tag tag.try_image_url, class: 'tag-thumbnail' %>
                <% end %>
                <div class='d-block'>
                  <span class='d-block'>
                    <%= tag.try_friendly_name %>
                    <% if tag.is_tagsafe_hosted %>
                      <i class="fa-solid fa-bolt" data-controller='tooltip' title="Tag is optimized and hosted by Tagsafe"></i>
                    <% end %>
                  </span>
                  <% if tag.has_friendly_name? %>
                    <span class='tag-card-text d-block'><%= tag.url_based_on_preferences %></span>
                  <% end %>
                </div>
              </div>
              <% if tag.primary_audit %>
                <div class='col-4 p-1 text-end'>
                  <%= render 'audits/tagsafe_score_pill_for_audit', audit: tag.primary_audit %>
                </div>
              <% end %>
            </div>
          </div>
        </div>
        <div class='tag-card-meta-info p-2'>
          <% if tag.last_released_at %>
            <span class='tag-card-text'>Last release: <%= tag.last_released_at.nil? ? 'Never' : "#{time_ago_in_words(tag.last_released_at)} ago" %></span>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>