<div class='page-title-container'>
  <div class='container-fluid'>
    <div class='row'>
      <div class='col-12'>
        <h1 class="page-title with-sub-title">Settings</h1>
        <h2 class="page-sub-title">Tag Management</h2>
      </div>
    </div>
  </div>
  <%= render 'settings_nav' %>
</div>

<div class="tagsafe-container">
  <table class="table table-hover col-12" style="table-layout: fixed">
    <thead>
      <tr>
        <th scope="col" style='width: 47%'>Tag</th>
        <th scope="col" style='width: 12%'>Release Monitoring</th>
        <th scope="col" style='width: 12%'>Uptime Monitoring</th>
        <th scope="col" style='width: 12%'>Scheduled Audits</th>
        <th scope="col" style='width: 12%'>Current Tagsafe Score</th>
        <th scope="col" style='width: 5%'></th>
      </tr>
    </thead>
    <tbody>
      <% @tags.each do |tag| %>
        <tr>
          <td>
            <div class='d-flex align-items-center'>
              <%= image_tag tag.try_image_url, class: 'tag-thumbnail border' %>
              <div class='d-inline-block' style='width: calc(100% - 55px); word-break: break-word; padding-left: 15px;'>
                <% if tag.has_friendly_name? %>
                  <span class='d-block'><b><%= tag.friendly_name %></b></span>
                  <span class='d-block'><%= tag.domain_and_path %></span>
                <% else %>
                  <b><%= tag.domain_and_path %></b>
                <% end %>
              </div>
            </div>
          </td>
          <td>
            <div class='d-flex align-items-center'>
              <% if tag.release_monitoring_enabled? %>
                <div class='tagsafe-pill small-text green force-content-width'><%= tag.tag_preferences.release_check_interval_in_words %></div>
              <% else %>
                <div class='tagsafe-pill small-text grey force-content-width'>Disabled</div>
              <% end %>
            </div>
          </td>
          <td>
            <div class='d-flex align-items-center'>
              <% if tag.uptime_regions_to_check.none? %>
                <div class='tagsafe-pill small-text grey'>0 regions</div>
              <% else %>
                <div class='tagsafe-pill small-text green force-content-width'><%= tag.uptime_regions_to_check.count %> regions</div>
              <% end %>
            </div>
          </td>
          <td>
            <div class='d-flex align-items-center'>
              <% if tag.scheduled_audits_enabled? %>
                <div class='tagsafe-pill small-text green force-content-width'><%= tag.tag_preferences.scheduled_audit_interval_in_words %></div>
              <% else %>
                <div class='tagsafe-pill small-text grey force-content-width'>Disabled</div>
              <% end %>
            </div>
          </td>
          <td>
            <div class='d-flex align-items-center'>
              <% if tag.audit_to_display %>
                <%= render 'audits/performance_audit_pill_for_audit', tag: tag, audit: tag.audit_to_display %>
              <% end %>
            </div>
          </td>
          <td>
            <div class='d-flex align-items-center'>
              <%= link_to 'Edit', edit_tag_path(tag) %>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= paginate @tags %>
</div>