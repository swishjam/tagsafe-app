<%= render_as_modal title: 'Invite Teammate' do %>
  <% if local_assigns[:completed] %>
    <div class='tagsafe-modal-body'>
      <h4><%= HtmlHelper.PASSED_ICON(color: 'green') %> <span class='ms-2'>Invite sent to <%= invited_user_email %>.</span></h4>
    </div>
    <div class='tagsafe-modal-divider'></div>
    <div class='tagsafe-modal-footer text-end'>
      <button class='tagsafe-btn' data-action='click->server-loadable-modal#hide'>Close</button>
    </div>
  <% else %>
    <%= form_for user_invite, data: { controller: 'loading_form' } do |f| %>
      <div class='tagsafe-modal-body'>
        <div class="form-floating">
          <%= f.text_field :email, class: 'form-control', placeholder: 'Email' %>
          <%= f.label :email %>
        </div>
        <% if user_invite.errors.any? %>
          <% user_invite.errors.full_messages.each do |err| %>
            <span class='d-block mt-1' style='color: red'><%= err %></span>
          <% end %>
        <% end %>
      </div>

      <div class='tagsafe-modal-divider'></div>
      <div class='tagsafe-modal-footer text-end'>
        <%= loading_submit_button 'Send Invite' %>
      </div>
    <% end %>
  <% end %>
<% end %>