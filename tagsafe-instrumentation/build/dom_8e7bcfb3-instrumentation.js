(()=>{"use strict";class t{constructor(t){this.tagConfigurationHash=t}el=()=>this._requiredAttr("el");loadRule=()=>this._requiredAttr("loadRule");tagsafeHostedTagUrl=()=>this._requiredAttr("tagsafeHostedTagUrl");directTagUrl=()=>this._requiredAttr("directTagUrl");injectLocation=()=>this._requiredAttr("injectLocation");sriValue=()=>this._requiredAttr("sriValue");_requiredAttr(t){return this.tagConfigurationHash[t]||new Error(`TagConfig is missing required attribute: ${t}`)}}class e{constructor(t){this.element=t,this.element.addEventListener("load",(t=>this._onLoad(t))),this.element.addEventListener("error",(t=>this._onError(t)))}_onLoad(t){console.log(`${this.element} loaded!`),console.log(t)}_onError(t){console.log(`${this.element} errored!`),console.log(t)}}class a{constructor({tagConfigsToInjectImmediately:t=[],tagConfigsToInjectOnLoad:e=[]}){this.tagConfigsToInjectImmediately=t,this.tagConfigsToInjectOnLoad=e}injectTagsIntoDOM(){this._injectTags(this.tagConfigsToInjectImmediately),window.addEventListener("load",(()=>this._injectTags(this.tagConfigsToInjectOnLoad)))}_injectTags(t){t.forEach((t=>this._injectTag(t)))}_injectTag(t){console.log("Injecting tag:"),console.log(t);const a=document.createElement(t.el());a.setAttribute(t.loadRule(),"true"),a.setAttribute("src",t.tagsafeHostedTagUrl()),a.setAttribute("data-tagsafe-og-url",t.directTagUrl());const o={head:document.head,body:document.body}[t.injectLocation()];new e(a),o.appendChild(a),console.log(`Tagsafe added the ${t.tagsafeHostedTagUrl()} tag to the DOM.`)}}const o={buildTime:"08/17/22 @ 09:35 AM (PDT)",tagsToInjectImmediately:[{directTagUrl:"https://cdn.segment.com/analytics.js/v1/4qYDwD8QrJuqCpqlIuN6waqj5BtfYZzu/analytics.min.js",tagsafeHostedTagUrl:"https://tagsafe-development-tag-versions.s3.amazonaws.com/voc00z6adxpvnty6l324b4rhouz7",loadRule:"defer",el:"script",injectLocation:"head",injectAt:"immediate",sri:"sha256-f524bedb853cb662b250318f8945d8d5713d51b027b4d575e505a570ecbc1615"}],tagsToInjectOnLoad:[],disabledTags:[]};window.Tagsafe=class{static init({tagsToInjectImmediately:e,tagsToInjectOnLoad:o}){if(this._initialized)throw new Error("Tagsafe already initialized.");this._initialized=!0;const i=e.map((e=>new t(e))),n=o.map((e=>new t(e)));console.log(i),console.log(n),new a({tagConfigsToInjectImmediately:i,tagConfigsToInjectOnLoad:n}).injectTagsIntoDOM()}},window.Tagsafe.config=o,window.Tagsafe.init({tagsToInjectImmediately:o.tagsToInjectImmediately,tagsToInjectOnLoad:o.tagsToInjectOnLoad})})();