(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=t((function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"interceptInjectedScriptTags",(function(){r._interceptAppendChild(),r._interceptInsertBefore(),r._interceptPrepend()})),n(this,"_interceptAppendChild",(function(){var e=Node.prototype.appendChild,t=r;Node.prototype.appendChild=function(){var n=arguments,r=this;return t._reRouteInjectedElIfNecessary(arguments[0],(function(){return e.apply(r,n)}))}})),n(this,"_interceptInsertBefore",(function(){var e=Node.prototype.insertBefore,t=r;Node.prototype.insertBefore=function(){var n=arguments,r=this;return t._reRouteInjectedElIfNecessary(arguments[0],(function(){return e.apply(r,n)}))}})),n(this,"_interceptPrepend",(function(){var e=Node.prototype.prepend,t=this;Node.prototype.prepend=function(){var n=arguments,r=this;return t._reRouteInjectedElIfNecessary(arguments[0],(function(){return e.apply(r,n)}))}})),n(this,"_reRouteInjectedElIfNecessary",(function(e,t){try{if("SCRIPT"===e.nodeName){var n=r.urlsToInterceptMap[e.getAttribute("src")];return n?r._interceptInjectedScriptTag(e,n,t):t()}return t()}catch(e){return console.error("Tagsafe intercept error: ".concat(e)),t()}})),n(this,"_interceptInjectedScriptTag",(function(e,t,n){try{var r=e.getAttribute("src");return console.log("Intercepting Script node ".concat(r," -> ").concat(t.tagsafeHostedTagUrl())),t.tagsafeHostedTagUrl()&&(e.setAttribute("src",t.tagsafeHostedTagUrl()),e.setAttribute("data-og-src",r)),t.sha256()&&(e.setAttribute("integrity","sha256-".concat(t.sha256())),e.setAttribute("crossorigin","anonymous")),t.loadRule()&&(e.removeAttribute("async"),e.removeAttribute("defer"),e.setAttribute(t.loadRule(),"true")),e.setAttribute("data-tagsafe-intercepted","true"),({head:document.head,body:document.body}[t.injectLocation()]||document.head).appendChild(e),window.Tagsafe.interceptedTags.push([r,t.tagsafeHostedTagUrl()||r]),e}catch(e){return console.error("Tagsafe intecept error: ".concat(e)),n()}})),this.urlsToInterceptMap=t,window.Tagsafe.interceptedTags=[]}));function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){var n,a,i=this,o=t.tagConfigsToInjectImmediately,c=void 0===o?[]:o,s=t.tagConfigsToInjectOnLoad,u=void 0===s?[]:s,l=t.metricsHandler,d=t.errorHandler;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=function(){var e={};i.tagConfigsToInjectImmediately.concat(i.tagConfigsToInjectOnLoad).forEach((function(t){t.directTagUrl()&&t.tagsafeHostedTagUrl()&&(e[t.directTagUrl()]=t)})),new r(e).interceptInjectedScriptTags()},(n="_setupScriptInterceptor")in this?Object.defineProperty(this,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):this[n]=a,this.tagConfigsToInjectImmediately=c,this.tagConfigsToInjectOnLoad=u,this.metricsHandler=l,this.errorHandler=d,window.Tagsafe.injectedTags=[]}var t,n;return t=e,(n=[{key:"injectTagsIntoDOM",value:function(){var e=this;this._setupScriptInterceptor(),this._injectTags(this.tagConfigsToInjectImmediately),window.addEventListener("load",(function(){return e._injectTags(e.tagConfigsToInjectOnLoad)}))}},{key:"_injectTags",value:function(e){var t=this;e.forEach((function(e){return t._injectTag(e)}))}},{key:"_injectTag",value:function(e){try{var t=document.createElement(e.el());t.setAttribute("data-tagsafe-tag-uid",e.uid()),t.setAttribute("data-tagsafe-inline-script","true"),t.innerText=e.script();var n={head:document.head,body:document.body}[e.injectLocation()];this.metricsHandler.addScriptTagToMonitor(t),n.appendChild(t),window.Tagsafe.injectedTags.push(e.toJson())}catch(t){console.error("Tagsafe script injection error, cannot inject ".concat(e.directTagUrl()||e.uid(),": ").concat(t)),this.errorHandler.captureError(t)}}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useDirectTagUrlsOnly:!1};o(this,e),s(this,"_",(function(){return n._optionalAttr("_")})),s(this,"uid",(function(){return n._requiredAttr("uid")})),s(this,"el",(function(){return n._requiredAttr("el")})),s(this,"loadRule",(function(){return n._requiredAttr("loadRule")})),s(this,"script",(function(){return n._providedOrGeneratedScript()})),s(this,"directTagUrl",(function(){return n._requiredAttr("directTagUrl")})),s(this,"tagsafeHostedTagUrl",(function(){return n._tagsafeHostedUrlBasedOnOptions()})),s(this,"injectLocation",(function(){return n._requiredAttr("injectLocation")})),s(this,"sha256",(function(){return n._sha256BasedOnOptions()})),s(this,"toJson",(function(){return{uid:n.uid(),el:n.el(),loadRule:n.loadRule(),directTagUrl:n.directTagUrl(),tagsafeHostedTagUrl:n.tagsafeHostedTagUrl(),injectLocation:n.injectLocation(),sha256:n.sha256(),script:n.script()}})),s(this,"_tagsafeHostedUrlBasedOnOptions",(function(){return n.useDirectTagUrlsOnly?null:n._optionalAttr("tagsafeHostedTagUrl")})),s(this,"_sha256BasedOnOptions",(function(){return n.useDirectTagUrlsOnly?null:n._optionalAttr("sha256")})),s(this,"_providedOrGeneratedScript",(function(){return n._optionalAttr("script")||'(function(scriptUrl, injectLocation) {var s = document.createElement("script");s.setAttribute("src", scriptUrl);s.setAttribute("data-tagsafe-injected", "true");var domLocation={head: document.head,body: document.body}[injectLocation];domLocation.appendChild(s);})("'.concat(n.directTagUrl(),'", "').concat(n.injectLocation(),'")')})),this.tagConfigurationHash=t,this.useDirectTagUrlsOnly=r.useDirectTagUrlsOnly,console.log("Should TagConfig `useDirectTagUrlsOnly`? ".concat(this.useDirectTagUrlsOnly))}var t,n;return t=e,(n=[{key:"_optionalAttr",value:function(e){var t=this.tagConfigurationHash[e];return""===t?null:t}},{key:"_requiredAttr",value:function(e){var t=this.tagConfigurationHash[e];if(void 0===t)throw new Error("TagConfig is missing required attribute: ".concat(e));return""===t?null:t}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors=[]}var t,n;return t=e,(n=[{key:"captureError",value:function(e){this.errors.push(e)}},{key:"reportErrors",value:function(){console.warn("Error reporting now yet available.")}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){var t,n,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(e){r.timings={DOMComplete:r._measurePerformanceAttribute("domComplete"),DOMInteractive:r._measurePerformanceAttribute("domInteractive"),DOMLoading:r._measurePerformanceAttribute("domLoading")}},(t="_onPageLoad")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n,this.timings={},window.addEventListener("load",(function(e){return r._onPageLoad(e)})),document.currentScript&&this.addScriptTagToMonitor(document.currentScript)}var t,n;return t=e,(n=[{key:"addScriptTagToMonitor",value:function(e){var t=this;e.addEventListener("load",(function(e){return t._onScriptLoaded(e)})),e.addEventListener("error",(function(e){return t._onScriptFailed(e)}))}},{key:"_measurePerformanceAttribute",value:function(e){return window.performance.timing[e]-window.performance.timing.navigationStart}},{key:"_onScriptLoaded",value:function(e){console.log("".concat(e.target.getAttribute("src")," loaded!"))}},{key:"_onScriptFailed",value:function(e){console.log("".concat(e.target.getAttribute("src")," errored!"))}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tagsToInjectImmediately:[],tagsToInjectOnLoad:[],useDirectTagUrlsOnly:!1,tagsToDisable:[]};if(this._initialized)throw new Error("Tagsafe already initialized.");this._initialized=!0,window.Tagsafe.config=e;var t=new d,n=new p;window.Tagsafe.errorHandler=t,window.Tagsafe.metricsHandler=n;var r=e.tagsToInjectImmediately.map((function(t){return new u(t,{useDirectTagUrlsOnly:e.useDirectTagUrlsOnly})})),a=e.tagsToInjectOnLoad.map((function(t){return new u(t,{useDirectTagUrlsOnly:e.useDirectTagUrlsOnly})})),o=new i({tagConfigsToInjectImmediately:r,tagConfigsToInjectOnLoad:a,errorHandler:t,metricsHandler:n});o.injectTagsIntoDOM()}}],null&&g(t.prototype,null),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.Tagsafe=y;var v=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({disabledTags:[],enabledTags:[],useDirectTagUrlsOnly:"true"===new URLSearchParams(window.location.search).get("tagsafe-direct_url_only")},{buildTime:"09/07/22 @ 03:58 PM (PDT)",tagsToInjectImmediately:[{_:"77b00ccd0a81504929a5af9804877e18",el:"script",uid:"tag_ca269738",directTagUrl:"https://cdn.segment.com/analytics.js/v1/4qYDwD8QrJuqCpqlIuN6waqj5BtfYZzu/analytics.min.js",tagsafeHostedTagUrl:"https://cdn-collin-dev.tagsafe.io/ww31v1uibbxtgb8rbqcejyfgwwir",loadRule:"synchronous",script:'!function(){  var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="4qYDwD8QrJuqCpqlIuN6waqj5BtfYZzu";;analytics.SNIPPET_VERSION="4.15.3";  analytics.load("4qYDwD8QrJuqCpqlIuN6waqj5BtfYZzu");  analytics.page();}}();',injectLocation:"head",injectAt:"immediate",sha256:"WmTEkiNNDB89yfW0uMwKYQV6cnOMbLS8q05k5DfYs9U=",tag_version:"tv_fe495d4f"}],tagsToInjectOnLoad:[],disabledTags:[]});window.Tagsafe.init(v)})();